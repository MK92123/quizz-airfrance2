<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Quiz Air France ‚Äî PAM & proc√©dures</title>
  <style>
    :root {
      --bg: #f6f7fb; --card: #ffffff; --txt: #111827; --muted: #6b7280;
      --ok: #0f766e; --bad: #b91c1c; --pri: #0a66ff; --warn: #b45309;
      --warnbg: #fff7ed; --time: #991b1b; --timebg: #fee2e2;
    }
    body {
      margin: 0; padding: 0; background: var(--bg); color: var(--txt);
      font: 16px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Arial;
    }
    .wrap {
      max-width: 980px; margin: 24px auto; background: var(--card);
      border-radius: 16px; box-shadow: 0 8px 24px rgba(0,0,0,.06);
      padding: 24px;
    }
    header {
      display: flex; flex-direction: column; align-items: center;
      gap: .35rem; margin-bottom: 8px;
    }
    header img {
      max-width: 220px; height: auto; display: block;
    }
    h1 {
      margin: 4px 0 0; text-align: center;
    }
    .sub {
      color: var(--muted); text-align: center;
      margin: 6px 0 12px; display: flex; gap: 12px;
      justify-content: center; flex-wrap: wrap; align-items: center;
    }
    .pill {
      background: #eef2ff; color: #1e3a8a; border-radius: 999px;
      padding: 4px 10px; font-size: .9rem;
    }
    .timer {
      background: var(--timebg); color: var(--time);
      border-radius: 999px; padding: 4px 14px; font-weight: 700;
      display: inline-flex; align-items: center; gap: 8px;
      font-size: 1.1rem;
      user-select: none;
      min-width: 90px;
      justify-content: center;
    }
    .time-low {
      background: #fecaca; color: #7f1d1d;
    }
    .q {
      font-weight: 700; margin: 10px 0 12px;
    }
    ul {
      list-style: none; padding: 0; margin: 0;
    }
    li {
      margin: .5rem 0;
    }
    label {
      display: flex; gap: .6rem; align-items: flex-start;
      cursor: pointer;
    }
    input[type=radio], input[type=checkbox] {
      margin-top: .25rem;
    }
    .feed {
      display: none; margin-top: 12px; border-radius: 10px; padding: 10px;
    }
    .ok {
      display: block; background: #e7f7f3; color: #065f46;
    }
    .bad {
      display: block; background: #fdeaea; color: #7f1d1d;
    }
    .row {
      display: flex; gap: 10px; justify-content: space-between;
      margin-top: 16px; flex-wrap: wrap;
    }
    button {
      border: 0; border-radius: 10px; padding: 10px 14px;
      cursor: pointer; font-weight: 600;
    }
    #next {
      background: var(--pri); color: #fff;
    }
    #next:disabled {
      opacity: .5; cursor: not-allowed;
    }
    #reset {
      background: #6b7280; color: #fff;
    }
    .score {
      margin-top: 8px; text-align: center; color: var(--muted);
    }
    footer {
      margin-top: 18px; text-align: center; color: var(--muted);
      font-size: .9rem;
    }
    .progress {
      height: 10px; background: #e5e7eb; border-radius: 99px; overflow: hidden; margin: 8px 0 18px;
    }
    .bar {
      height: 100%; width: 0; background: var(--pri); transition: width .25s;
    }
  </style>
</head>
<body>

  <!-- üîê PASSWORD GATE -->
  <div id="gate">
    <div class="card" style="max-width: 380px; margin: 40vh auto;">
      <h2>Acc√®s quiz</h2>
      <p>Entrez le mot de passe pour continuer.</p>
      <input id="pw" type="password" placeholder="Mot de passe" />
      <button onclick="unlock()">Entrer</button>
      <div id="pwmsg" class="error" style="color:#b91c1c; display:none; margin-top:8px;">
        Mot de passe incorrect
      </div>
      <div style="margin-top:12px; font-size:.85rem; color:#94a3b8;">
        Astuce : le mot de passe est sensible √† la casse.
      </div>
    </div>
  </div>

  <!-- APP -->
  <div id="app" style="display:none">
    <div class="wrap">
      <header>
        <img src="https://th.bing.com/th/id/R.e981a076438938f94b4bdef2cc28ed8c?rik=Tl8jWSDOnbPScw&riu=http%3a%2f%2fpluspng.com%2fimg-png%2fair-france-logo-png-air-france-logo-airfrance-skyteam-symbol-5650.png&ehk=%2bzIUC9nKAkbnVe1Gq4lsFCWxLCR3mhuQeeenhYbyNyQ%3d&risl=&pid=ImgRaw&r=0" alt="Air France Logo" onerror="this.style.display='none'"/>
        <h1>Quiz Air France</h1>
      </header>

      <div class="sub">
        <span id="meta" class="pill"></span>
        <span id="timer" class="timer">30:00</span>
        <span id="liveScore" class="pill-ghost"></span>
      </div>

      <div class="progress"><div id="bar" class="bar"></div></div>

      <div id="quiz"></div>

      <div class="row">
        <button id="reset" onclick="resetQuiz()">Recommencer (nouvel ordre)</button>
        <button id="next" onclick="nextQ()" disabled>Valider</button>
      </div>

      <div id="score" class="score"></div>

      <footer>Mode examen ‚Äî 30 minutes pour tout le quiz ‚Äî ordre al√©atoire ‚Äî feedback instantan√© ‚Äî g√©n√©r√© le 2025-08-11.</footer>
    </div>
  </div>

  <audio id="beep">
    <source src="data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEAESsAACJWAAACABYAAABWAAACAAA=" type="audio/wav" />
  </audio>

<script>
  // üîê Password
  const PASSWORD = "AF2025!";
  if (sessionStorage.getItem("quiz_unlocked") === "1") {
    document.getElementById("gate").style.display = "none";
    document.getElementById("app").style.display = "block";
  }
  function unlock(){
    const v = (document.getElementById("pw").value||"").trim();
    if (v === PASSWORD) {
      sessionStorage.setItem("quiz_unlocked","1");
      document.getElementById("gate").style.display="none";
      document.getElementById("app").style.display="block";
      setTimeout(()=>{
        const first = document.querySelector('#app input[type="radio"], #app input[type="checkbox"]');
        if (first) first.focus();
      }, 50);
    } else {
      const msg = document.getElementById("pwmsg");
      msg.style.display="block";
      setTimeout(()=>msg.style.display="none", 2000);
    }
  }
  document.addEventListener("keydown", (e)=>{
    if (document.getElementById("gate").style.display !== "none" && e.key === "Enter") unlock();
  });

  // === Questions formul√©es en phrases compl√®tes ===
  const POOL = [
    {
      type: "single",
      t: "Qu'est-ce qu'un UMNR (Unaccompanied Minor) chez Air France, et quel √¢ge maximum un enfant doit-il avoir pour √™tre consid√©r√© comme UMNR ?",
      o: [
        "Un UMNR est un enfant voyageant seul sans accompagnateur adulte, et il doit avoir moins de 12 ans pour b√©n√©ficier de ce statut.",
        "Un UMNR est un adulte accompagn√© d‚Äôun mineur, et ce mineur doit avoir moins de 15 ans.",
        "Un UMNR est un enfant qui voyage uniquement en cabine affaires, sans limite d‚Äô√¢ge.",
        "Un UMNR d√©signe un passager ayant une assistance particuli√®re, quel que soit son √¢ge."
      ],
      c: 0,
      e: "UMNR d√©signe un mineur non accompagn√© √¢g√© de moins de 12 ans selon la politique Air France."
    },
    {
      type: "single",
      t: "Dans quelles conditions un passager peut-il b√©n√©ficier d'un surclassement chez Air France selon les proc√©dures PAM ?",
      o: [
        "Un passager peut √™tre surclass√© uniquement s'il a un statut √©lite, r√©serve une classe tarifaire premium, et s'il y a de la disponibilit√© dans la cabine sup√©rieure.",
        "Tous les passagers ont automatiquement droit √† un surclassement, quelle que soit leur classe ou statut.",
        "Le surclassement est offert uniquement aux passagers ayant r√©serv√© une classe √©conomique non remboursable.",
        "Les mineurs non accompagn√©s (UMNR) sont prioritaires pour les surclassements."
      ],
      c: 0,
      e: "Le surclassement d√©pend du statut client, de la classe tarifaire et de la disponibilit√© de si√®ges en cabine sup√©rieure."
    },
    {
      type: "multi",
      t: "Quels sont les droits en mati√®re de franchise bagages pour un passager Flying Blue Gold voyageant en classe √©conomique ? S√©lectionnez toutes les affirmations vraies.",
      o: [
        "Le passager a droit √† 2 bagages en soute, chacun pesant jusqu'√† 23 kg.",
        "Le passager peut embarquer 1 seul bagage cabine sans limite de poids.",
        "Il b√©n√©ficie de priorit√©s sp√©cifiques √† l‚Äôenregistrement, mais pas de franchise bagages suppl√©mentaire.",
        "Le passager doit payer un suppl√©ment pour chaque bagage enregistr√©."
      ],
      c: [0],
      e: "Un membre Flying Blue Gold en classe √©conomique b√©n√©ficie d‚Äôune franchise bagage en soute de 2 pi√®ces de 23 kg chacune."
    },
    {
      type: "single",
      t: "Que doit faire un agent Air France en cas d'annulation d‚Äôun vol pour informer et assister les passagers selon les r√®gles PAM ?",
      o: [
        "Informer les passagers via annonce et affichage, proposer un r√©acheminement adapt√©, et offrir des prestations si les passagers y ont droit.",
        "Laisser les passagers attendre sans information, car cela rel√®ve du service client.",
        "Proc√©der uniquement au remboursement du billet sans autre prestation.",
        "Fermer les guichets et refuser toute prise en charge."
      ],
      c: 0,
      e: "Les agents doivent imp√©rativement informer, proposer des alternatives et assister les passagers conform√©ment aux r√®gles PAM."
    },
    {
      type: "single",
      t: "Quelle est la d√©finition exacte de MISCO dans le cadre des proc√©dures Air France ?",
      o: [
        "MISCO signifie ¬´ Message d‚ÄôInformation Sp√©cifique au Client ¬ª : un message d√©di√© pour informer un passager sur une situation particuli√®re.",
        "MISCO est un protocole de s√©curit√© √† bord des avions.",
        "MISCO d√©signe une proc√©dure interne de maintenance des avions.",
        "MISCO est un programme de fid√©lit√© pour les clients fr√©quents."
      ],
      c: 0,
      e: "MISCO est un message personnalis√© adress√© aux clients pour les informer pr√©cis√©ment d‚Äôun probl√®me ou d‚Äôune situation."
    },
    {
      type: "multi",
      t: "Lorsque Air France doit r√©acheminer un passager suite √† une perturbation, quelles sont les priorit√©s op√©rationnelles et humaines √† respecter ? S√©lectionnez toutes les r√©ponses exactes.",
      o: [
        "Assurer la s√©curit√© du passager en priorit√© absolue.",
        "Prioriser un vol Air France disponible avant de consid√©rer un vol partenaire.",
        "Fournir une information claire et compl√®te au passager sur les modalit√©s du r√©acheminement.",
        "Annuler les correspondances du passager sans autre d√©marche."
      ],
      c: [0,1,2],
      e: "La s√©curit√©, la priorit√© aux vols AF, et la communication claire sont essentielles. Annuler sans information n‚Äôest pas conforme."
    },
    {
      type: "single",
      t: "Lors d‚Äôun embarquement, quel traitement particulier est r√©serv√© aux mineurs non accompagn√©s (UMNR) ?",
      o: [
        "Les UMNR embarquent en priorit√© avant les autres passagers pour leur faciliter l‚Äôacc√®s √† bord.",
        "Les UMNR embarquent en dernier pour √©viter tout d√©rangement.",
        "Ils embarquent uniquement en m√™me temps que leur famille.",
        "Ils doivent passer par une zone d‚Äôembarquement sp√©cifique, s√©par√©e des autres."
      ],
      c: 0,
      e: "Les UMNR b√©n√©ficient d‚Äôun embarquement prioritaire pour faciliter leur prise en charge."
    },
    {
      type: "single",
      t: "Quelle franchise bagage suppl√©mentaire est accord√©e aux passagers √† mobilit√© r√©duite (PMR) ?",
      o: [
        "Un bagage suppl√©mentaire gratuit en soute leur est accord√© pour transporter leur mat√©riel m√©dical ou d‚Äôassistance.",
        "Ils doivent payer un suppl√©ment pour chaque bagage comme tous les passagers.",
        "Ils ne b√©n√©ficient d‚Äôaucune franchise suppl√©mentaire.",
        "Ils peuvent embarquer un bagage cabine plus lourd que les autres passagers."
      ],
      c: 0,
      e: "Les PMR b√©n√©ficient d‚Äôun bagage suppl√©mentaire gratuit en soute pour leur mat√©riel sp√©cifique."
    },
    {
      type: "single",
      t: "Selon les r√®gles PAM, que doit faire un agent √† l‚Äôescale en cas de report ou retard important d‚Äôun vol ?",
      o: [
        "Informer rapidement les clients, organiser les prestations n√©cessaires (repas, h√©bergement), et g√©rer le r√©acheminement.",
        "Ne rien communiquer jusqu‚Äô√† nouvel ordre.",
        "Ne fournir que des bons repas sans autres prestations.",
        "Reporter automatiquement tous les clients sur un autre vol sans explications."
      ],
      c: 0,
      e: "La prise en charge compl√®te avec information et gestion des prestations est obligatoire."
    },
    {
      type: "multi",
      t: "Dans quels cas un agent peut-il exercer son droit d‚Äôempowerment (d√©cision autonome) selon PAM ? Cochez toutes les r√©ponses correctes.",
      o: [
        "Pour corriger une erreur √©vidente du syst√®me de r√©servation Air France.",
        "Pour offrir un voucher mod√©r√© en compensation d‚Äôun d√©sagr√©ment.",
        "Pour refuser syst√©matiquement toute demande bas√©e sur le r√®glement CE261.",
        "Pour adapter l‚Äôacc√®s prioritaire SkyPriority √† un passager PMR."
      ],
      c: [0,1,3],
      e: "L‚Äôempowerment permet ces d√©cisions, mais pas le refus syst√©matique du CE261."
    },
    {
      type: "single",
      t: "Que signifie l'acronyme PAD dans le contexte des priorit√©s d‚Äôembarquement et d‚Äôacc√®s chez Air France ?",
      o: [
        "Priorit√© d‚ÄôAcc√®s au D√©part, donnant certains privil√®ges aux passagers concern√©s.",
        "Passenger Arrival Document, un document de voyage.",
        "Proc√©dure Administrative D√©part, une formalit√© au comptoir.",
        "Passenger Assistance Directive, un guide d‚Äôassistance passagers."
      ],
      c: 0,
      e: "PAD est la Priorit√© d‚ÄôAcc√®s au D√©part, accord√©e √† certains passagers."
    },
    {
      type: "single",
      t: "Si un passager est refus√© √† l‚Äôembarquement pour surr√©servation (DBC), quelles sont les prestations qu‚Äôil doit recevoir selon la r√©glementation ?",
      o: [
        "Une indemnisation financi√®re, une assistance au sol, et un r√©acheminement vers sa destination finale.",
        "Aucune prestation, il doit simplement accepter le refus.",
        "Un remboursement partiel du billet sans assistance suppl√©mentaire.",
        "Un surclassement gratuit sur un vol ult√©rieur."
      ],
      c: 0,
      e: "Le passager DBC a droit √† une indemnisation, assistance et r√©acheminement selon la r√©glementation."
    },
    {
      type: "single",
      t: "Quel est le r√¥le principal de l‚Äô√©quipe DEDICATE (Dedicated Disruption Customer Assistance Team) chez Air France ?",
      o: [
        "G√©rer sp√©cifiquement l‚Äôassistance aux clients lors des perturbations op√©rationnelles.",
        "Piloter les avions en cas d‚Äôurgence.",
        "Assurer la maintenance des √©quipements √† bord.",
        "G√©rer le programme de fid√©lit√© Flying Blue."
      ],
      c: 0,
      e: "DEDICATE est une √©quipe d√©di√©e √† la gestion client lors de perturbations."
    },
    {
      type: "multi",
      t: "Que peut faire un agent en cas d‚Äôexc√®s de bagage (overweight) ? Cochez les bonnes pratiques.",
      o: [
        "Proposer au client d‚Äôacheter une franchise bagage anticip√©e (ABA) avant l‚Äôenregistrement.",
        "Refuser syst√©matiquement le bagage sur le vol.",
        "√âmettre un billet √©lectronique de paiement (EMD) pour le suppl√©ment bagage.",
        "Accepter le bagage sans suppl√©ment quel que soit le poids."
      ],
      c: [0,2],
      e: "L‚ÄôABA et la facturation via EMD sont les solutions recommand√©es."
    },
    {
      type: "single",
      t: "Est-ce qu‚Äôune surcharge est appliqu√©e aux mineurs non accompagn√©s (UMNR) lors de la r√©servation ?",
      o: [
        "Oui, une surcharge UMNR est appliqu√©e pour la prise en charge sp√©cifique.",
        "Non, les mineurs ne payent jamais de surcharge.",
        "Oui, mais uniquement sur les vols long-courriers.",
        "Non, sauf s‚Äôils voyagent en classe affaires."
      ],
      c: 0,
      e: "Une surcharge UMNR est syst√©matiquement appliqu√©e pour la prise en charge d√©di√©e."
    }
  ];

  // Shuffle utils
  function shuffle(arr){
    for (let i = arr.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [arr[i], arr[j]] = [arr[j], arr[i]];
    }
    return arr;
  }

  function shuffleOptions(q){
    const pairs = q.o.map((text, idx) => ({ text, idx }));
    shuffle(pairs);
    q.o = pairs.map(p => p.text);
    if (q.type === 'single') {
      q.c = pairs.findIndex(p => p.idx === q.c);
    } else if (q.type === 'multi') {
      q.c = q.c.map(idx => pairs.findIndex(p => p.idx === idx)).sort((a,b) => a-b);
    }
    return q;
  }

  let Q = [];
  let i = 0;
  let answered = false;
  let score = 0;

  // Timer global 30 minutes en secondes
  let totalTime = 30 * 60;
  let timerInterval = null;

  function initQuiz(){
    Q = POOL.map(q => ({type:q.type||'single', t:q.t, o:[...q.o], c: Array.isArray(q.c)?[...q.c]:q.c, e:q.e})).map(shuffleOptions);
    shuffle(Q);
    i = 0; score = 0; answered = false;
    document.getElementById('next').disabled = true;
    render();
    startGlobalTimer();
  }

  function render(){
    const bar = document.getElementById('bar');
    const meta = document.getElementById('meta');
    const sc = document.getElementById('liveScore');
    const qn = Q[i];
    const total = Q.length;

    meta.textContent = `Question ${i+1} / ${total}${qn.type==='multi'?' ‚Ä¢ (plusieurs r√©ponses)':''}`;
    bar.style.width = `${Math.round(((i)/total)*100)}%`;
    sc.textContent = `Score : ${score} / ${total}`;

    const wrap = [];
    wrap.push(`<div class="q">${qn.t}</div><ul>`);
    if (qn.type === 'multi') {
      qn.o.forEach((opt, idx) => {
        wrap.push(`<li><label><input type="checkbox" name="opt" value="${idx}" onclick="onSelect()"/> ${opt}</label></li>`);
      });
    } else {
      qn.o.forEach((opt, idx) => {
        wrap.push(`<li><label><input type="radio" name="opt" value="${idx}" onclick="onSelect()"/> ${opt}</label></li>`);
      });
    }
    wrap.push(`</ul><div id="feed" class="feed"></div>`);
    document.getElementById('quiz').innerHTML = wrap.join('');

    answered = false;
    document.getElementById('next').disabled = true;
    document.getElementById('next').textContent = 'Valider';
  }

  function onSelect(){
    if (!answered) document.getElementById('next').disabled = false;
  }

  function evaluate(){
    const qn = Q[i];
    let correct = false;
    if (qn.type === 'single') {
      const sel = document.querySelector('input[name="opt"]:checked');
      if (!sel) return null;
      correct = (parseInt(sel.value, 10) === qn.c);
    } else {
      const sels = Array.from(document.querySelectorAll('input[name="opt"]:checked')).map(x=>parseInt(x.value, 10)).sort((a,b)=>a-b);
      if (sels.length === 0) return null;
      correct = (JSON.stringify(sels) === JSON.stringify(qn.c));
    }
    return correct;
  }

  function showFeedback(correct){
    const qn = Q[i];
    const feed = document.getElementById('feed');
    if (correct) {
      feed.className = 'feed ok';
      feed.textContent = `Bonne r√©ponse. ${qn.e}`;
    } else {
      feed.className = 'feed bad';
      let sol = (qn.type === 'single') ? qn.o[qn.c] : qn.c.map(idx => qn.o[idx]).join(' + ');
      feed.textContent = `Mauvaise r√©ponse. Solution : ${sol}. ${qn.e}`;
    }
  }

  function nextQ(){
    if (answered) {
      i++;
      if (i < Q.length) {
        render();
      } else {
        finish();
      }
      return;
    }
    const res = evaluate();
    if (res === null) {
      alert("Choisis au moins une r√©ponse.");
      return;
    }
    if (res) score++;
    showFeedback(res);
    document.getElementById('liveScore').textContent = `Score : ${score} / ${Q.length}`;
    answered = true;
    document.getElementById('next').textContent = 'Question suivante';
    // Auto-advance after short delay to read feedback
    setTimeout(() => {
      i++;
      if (i < Q.length) {
        render();
      } else {
        finish();
      }
    }, 1100);
  }

  function resetQuiz(){
    stopGlobalTimer();
    initQuiz();
  }

  function finish(){
    stopGlobalTimer();
    const total = Q.length;
    const pct = Math.round(100 * score / total);
    const appr = (pct >= 90) ? "Excellent (ma√Ætrise)"
                : (pct >= 80) ? "Tr√®s bien (solide)"
                : (pct >= 70) ? "Bien (√† consolider)"
                : (pct >= 60) ? "Passable (renforcer les bases)"
                : "Insuffisant (r√©viser PAM/IRG/DG)";
    document.getElementById('bar').style.width = '100%';
    document.getElementById('meta').textContent = 'Termin√© ‚úÖ';
    document.getElementById('quiz').innerHTML =
      `<div class="q">Bravo ! Tu as termin√© le quiz.</div>
       <p class="score">Score final : <strong>${score}/${total}</strong> (${pct}%) ‚Äî ${appr}</p>
       <p>Tu peux cliquer sur ‚ÄúRecommencer (nouvel ordre)‚Äù pour rejouer.</p>`;
    document.getElementById('next').disabled = true;
    document.getElementById('liveScore').textContent = `Score final : ${score} / ${total} (${pct}%) ‚Äî ${appr}`;
    document.getElementById('timer').textContent = '--:--';
  }

  // Timer global 30 minutes
  function startGlobalTimer(){
    stopGlobalTimer();
    totalTime = 30 * 60;
    updateTimerUI();
    timerInterval = setInterval(() => {
      totalTime--;
      if (totalTime <= 60) {
        document.getElementById('timer').classList.add('time-low');
      }
      if (totalTime <= 0) {
        stopGlobalTimer();
        alert("Temps √©coul√© ! Le quiz est termin√©.");
        finish();
      } else {
        updateTimerUI();
      }
    }, 1000);
  }

  function stopGlobalTimer(){
    if(timerInterval){
      clearInterval(timerInterval);
      timerInterval = null;
    }
  }

  function updateTimerUI(){
    const m = Math.floor(totalTime/60);
    const s = totalTime % 60;
    document.getElementById('timer').textContent = `${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
  }

  // D√©marrage si d√©j√† d√©verrouill√©
  if(sessionStorage.getItem("quiz_unlocked") === "1"){
    initQuiz();
  }
</script>

</body>
</html>
