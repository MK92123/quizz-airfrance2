
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Quiz Air France ‚Äî Acc√®s prot√©g√©</title>
  <style>
    :root{--bg:#f6f7fb;--card:#ffffff;--txt:#111827;--muted:#6b7280;--ok:#0f766e;--bad:#b91c1c;--pri:#0a66ff;--warn:#b45309;--warnbg:#fff7ed;--time:#991b1b;--timebg:#fee2e2}
    body{margin:0;padding:0;background:var(--bg);color:var(--txt);font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Arial}
    .wrap{max-width:980px;margin:24px auto;background:var(--card);border-radius:16px;box-shadow:0 8px 24px rgba(0,0,0,.06);padding:24px}
    header{display:flex;flex-direction:column;align-items:center;gap:.35rem;margin-bottom:8px}
    header img{max-width:220px;height:auto;display:block}
    h1{margin:4px 0 0;text-align:center}
    .sub{color:var(--muted);text-align:center;margin:6px 0 12px;display:flex;gap:12px;justify-content:center;flex-wrap:wrap;align-items:center}
    .pill{background:#eef2ff;color:#1e3a8a;border-radius:999px;padding:4px 10px;font-size:.9rem}
    .progress{height:10px;background:#e5e7eb;border-radius:99px;overflow:hidden;margin:8px 0 18px}
    .bar{height:100%;width:0;background:var(--pri);transition:width .25s}
    .q{font-weight:700;margin:10px 0 12px}
    ul{list-style:none;padding:0;margin:0}
    li{margin:.5rem 0}
    label{display:flex;gap:.6rem;align-items:flex-start;cursor:pointer}
    input[type=radio], input[type=checkbox]{margin-top:.25rem}
    .feed{display:none;margin-top:12px;border-radius:10px;padding:10px}
    .ok{display:block;background:#e7f7f3;color:#065f46}
    .bad{display:block;background:#fdeaea;color:#7f1d1d}
    .row{display:flex;gap:10px;justify-content:space-between;margin-top:16px;flex-wrap:wrap}
    button{border:0;border-radius:10px;padding:10px 14px;cursor:pointer;font-weight:600}
    #next{background:var(--pri);color:#fff} #next:disabled{opacity:.5;cursor:not-allowed}
    #reset{background:#6b7280;color:#fff}
    .score{margin-top:8px;text-align:center;color:var(--muted)}
    footer{margin-top:18px;text-align:center;color:var(--muted);font-size:.9rem}
    .timer{background:var(--timebg);color:var(--time);border-radius:999px;padding:4px 10px;font-weight:700;display:inline-flex;align-items:center;gap:8px}
    .time-low{background:#fecaca;color:#7f1d1d}
    .pill-ghost{background:#f3f4f6;color:#374151}
    .disclaimer{background:var(--warnbg);border:1px solid #fed7aa;color:var(--warn);padding:10px 12px;border-radius:10px;margin:8px 0 12px;font-size:.95rem}
    .timebar{height:6px;background:#fde2e2;border-radius:999px;overflow:hidden}
    .timebar > div{height:100%;width:100%;background:#ef4444;transition:width .2s linear}

    /* Gate */
    #gate{display:flex;min-height:100vh;align-items:center;justify-content:center;background:#0f172a;padding:16px}
    .card{background:#fff;padding:24px;border-radius:14px;box-shadow:0 10px 30px rgba(0,0,0,.25);max-width:380px;width:100%}
    .card h2{margin:0 0 8px}
    .card p{margin:0 0 10px;color:#6b7280}
    .card input{width:100%;padding:10px;border:1px solid #e5e7eb;border-radius:10px;margin-bottom:10px}
    .card button{width:100%;padding:10px 14px;border:0;border-radius:10px;background:#0a66ff;color:#fff;font-weight:600;cursor:pointer}
    .error{color:#b91c1c;margin-top:8px;display:none}
  </style>
</head>
<body>

  <!-- üîê PASSWORD GATE -->
  <div id="gate">
    <div class="card">
      <h2>Acc√®s quiz</h2>
      <p>Entrez le mot de passe pour continuer.</p>
      <input id="pw" type="password" placeholder="Mot de passe">
      <button onclick="unlock()">Entrer</button>
      <div id="pwmsg" class="error">Mot de passe incorrect</div>
      <div style="margin-top:12px;font-size:.85rem;color:#94a3b8">Astuce : le mot de passe est sensible √† la casse.</div>
    </div>
  </div>

  <!-- APP -->
  <div id="app" style="display:none">
    <div class="wrap">
      <header>
        <img src="https://th.bing.com/th/id/R.e981a076438938f94b4bdef2cc28ed8c?rik=Tl8jWSDOnbPScw&riu=http%3a%2f%2fpluspng.com%2fimg-png%2fair-france-logo-png-air-france-logo-airfrance-skyteam-symbol-5650.png&ehk=%2bzIUC9nKAkbnVe1Gq4lsFCWxLCR3mhuQeeenhYbyNyQ%3d&risl=&pid=ImgRaw&r=0" alt="Air France Logo" onerror="this.style.display='none'">
        <h1>Quiz Air France</h1>
      </header>

      <div class="disclaimer">
        Ceci est <strong>confidentiel</strong> et ne doit pas √™tre partag√©. En cas de partage, contactez : <strong>kneycie@gmail.com</strong>. Propri√©t√© intellectuelle d‚Äôun agent AF.
      </div>

      <div class="sub">
        <span id="meta" class="pill"></span>
        <span id="timer" class="timer"><span id="ttext">00:30</span></span>
        <span id="liveScore" class="pill-ghost"></span>
      </div>
      <div class="timebar"><div id="timebarfill"></div></div>
      <div class="progress"><div id="bar" class="bar"></div></div>
      <div id="quiz"></div>
      <div class="row">
        <button id="reset" onclick="resetQuiz()">Recommencer (nouvel ordre)</button>
        <button id="next" onclick="nextQ()" disabled>Valider</button>
      </div>
      <div id="score" class="score"></div>
      <footer>Mode examen ‚Äî 30s / question ‚Äî ordre al√©atoire ‚Äî feedback instantan√© ‚Äî g√©n√©r√© le 2025-08-11 02:47.</footer>
    </div>
  </div>

  <audio id="beep">
    <source src="data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEAESsAACJWAAACABYAAABWAAACAAA=" type="audio/wav">
  </audio>

  <script>
    // üîê Password
    const PASSWORD = "AF2025!";
    if (sessionStorage.getItem("quiz_unlocked") === "1") { document.getElementById("gate").style.display="none"; document.getElementById("app").style.display="block"; }

    function unlock(){
      const v = (document.getElementById("pw").value||"").trim();
      if (v === PASSWORD) {
        sessionStorage.setItem("quiz_unlocked","1");
        document.getElementById("gate").style.display="none";
        document.getElementById("app").style.display="block";
        setTimeout(()=>{
          const first = document.querySelector('#app input[type="radio"], #app input[type="checkbox"]');
          if (first) first.focus();
        }, 50);
      } else {
        const msg = document.getElementById("pwmsg"); msg.style.display="block"; setTimeout(()=>msg.style.display="none", 2000);
      }
    }
    document.addEventListener("keydown", (e)=>{ if (document.getElementById("gate").style.display!=="none" && e.key==="Enter") unlock(); });

    // === Question pool (110) ===
    const POOL = [{"type": "single", "t": "AVIH : poids max (animal + caisse) ?", "o": ["50 kg", "75 kg", "90 kg", "Aucune limite"], "c": 1, "e": "Limite op√©rationnelle 75 kg."}, {"type": "single", "t": "AVIH : √¢ge minimum d‚Äôacceptation ?", "o": ["8 semaines", "10 semaines", "15 semaines", "12 semaines"], "c": 2, "e": "Minimum 15 semaines + vaccinations requises."}, {"type": "single", "t": "AVIH : races brachyc√©phales en soute ?", "o": ["Accept√©es sous r√©serve", "Accept√©es si caisse ventil√©e", "Refus√©es", "Accept√©es si < 8 kg"], "c": 2, "e": "Risque respiratoire √©lev√© ‚Üí refus en soute."}, {"type": "single", "t": "AVIH : Staffie LOF (non class√© cat.1/2) ?", "o": ["Toujours interdit", "Possible en soute avec cage conforme", "Cabine uniquement", "Libre sans formalit√©s"], "c": 1, "e": "Staffie LOF non class√© ‚Üí possible en soute si cage conforme."}, {"type": "multi", "t": "AVIH : caract√©ristiques d‚Äôune caisse conforme", "o": ["Rigide et ventil√©e", "Porte boulonn√©e", "Roulettes obligatoires", "Verrou fiable"], "c": [0, 1, 3], "e": "Rigide, ventil√©e, porte boulonn√©e, verrou solide."}, {"type": "single", "t": "AVIH : o√π cr√©er le service dans Alt√©a ?", "o": ["Remarque libre", "SSR AVIH avec quota v√©rifi√©", "OSI uniquement", "Aucun"], "c": 1, "e": "Cr√©er SSR + contr√¥ler quota."}, {"type": "single", "t": "AVIH : documents sanitaires ?", "o": ["Inutiles en UE", "Exig√©s selon pays et compagnie", "Jamais requis", "V√©rifi√©s par le PNC uniquement"], "c": 1, "e": "Conformes aux exigences pays/compagnie."}, {"type": "single", "t": "AVIH : appel CLD + t√©lex requis quand ?", "o": ["Toujours, m√™me si d√©j√† r√©serv√©", "Uniquement si r√©servations sold out", "Si ajout tardif/sans r√©servation", "Jamais"], "c": 2, "e": "Si pas de r√©servation AVIH et ajout tardif."}, {"type": "single", "t": "AVIH en transit court SPL/CDG/ORY :", "o": ["Toujours refus√©", "Accept√© sans condition", "Trait√© selon proc√©dures d√©di√©es", "Libre si caisse souple"], "c": 2, "e": "Proc√©dures AVIH sp√©cifiques en correspondance."}, {"type": "single", "t": "PETC (cabine) : r√®gle cl√© ?", "o": ["Animal libre", "Sous le si√®ge, gabarit/poids cabine", "Dans le coffre cabine", "Dans les toilettes"], "c": 1, "e": "Confin√© sous le si√®ge, limites cabine."}, {"type": "single", "t": "SVAN : acceptation ?", "o": ["Sans aucun document", "Sous conditions et docs pays/compagnie", "Toujours refus√©", "Bagage cabine obligatoire"], "c": 1, "e": "Selon r√©glementation pays/compagnie."}, {"type": "multi", "t": "AVIH : quand refuser ?", "o": ["Caisse molle", "Animal < 15 semaines", "Race brachyc√©phale", "Poids total > 75 kg"], "c": [0, 1, 2, 3], "e": "Tous ces cas sont non conformes."}, {"type": "single", "t": "Empowerment : principe ?", "o": ["D√©cider hors cadre", "D√©cider dans un cadre d√©fini", "Uniquement avec accord √©crit", "Jamais"], "c": 1, "e": "Agir dans les limites d‚Äôempowerment."}, {"type": "single", "t": "Wave excess : objectif op√©rationnel ?", "o": ["Fluidifier files, √©viter micro-encaissements", "Augmenter recettes", "Cr√©er exceptions al√©atoires", "Ralentir flux"], "c": 0, "e": "Fluidit√©/efficacit√©, pas syst√©matique."}, {"type": "single", "t": "Wave excess : cible d‚Äôusage ?", "o": ["~10% des cas pertinents", "~50% pax", "Toujours", "Jamais"], "c": 0, "e": "Utilisation cibl√©e, ‚âà10%."}, {"type": "multi", "t": "Empowerment : situations pertinentes", "o": ["Petit geste eau/voucher mod√©r√©", "Corriger erreur AF √©vidente", "D√©nier CE261 par principe", "Adapter acc√®s SkyPriority PMR"], "c": [0, 1, 3], "e": "Toujours pro, s√©curit√©/qualit√© d‚Äôabord."}, {"type": "single", "t": "Empowerment : qui valide ?", "o": ["Toujours Dir. Escale", "Manager op√©rationnel selon cas", "Aucun contr√¥le", "PNC"], "c": 1, "e": "Selon proc√©dure locale/cadre d√©fini."}, {"type": "single", "t": "Wave excess : quand √©viter ?", "o": ["Conflit/agression", "Files longues et pax coop√©ratif", "Pics vacances", "Pannes syst√®me"], "c": 0, "e": "Ne pas l‚Äôutiliser en cas sensible."}, {"type": "single", "t": "Empowerment : tra√ßabilit√© ?", "o": ["Inutile", "Souhaitable selon cadre", "Interdite", "Uniquement si PNC demande"], "c": 1, "e": "Tracer selon proc√©dure."}, {"type": "single", "t": "Wave excess : communication au client ?", "o": ["Aucune explication", "Rester flou", "Transparente et factuelle", "Promettre syst√©matiquement"], "c": 2, "e": "Communication claire et neutre."}, {"type": "single", "t": "Empowerment : p√©rim√®tre financier ?", "o": ["Sans limite", "Dans des seuils d√©finis", "Au jug√©", "Toujours 0‚Ç¨"], "c": 1, "e": "Respecter seuils/bar√®mes."}, {"type": "single", "t": "Empowerment : priorit√© ?", "o": ["Image > s√©curit√©", "S√©curit√©/s√ªret√© > tout le reste", "Recette > image", "Aucune"], "c": 1, "e": "S√©curit√©/s√ªret√© toujours prioritaires."}, {"type": "single", "t": "Wave excess : documentation ?", "o": ["Toujours dossier long", "Note rapide si requis", "Jamais", "Demander signature client"], "c": 1, "e": "Note rapide si requis par process."}, {"type": "multi", "t": "Empowerment : erreurs √† √©viter", "o": ["Promesses hors politique", "Contredire PAM", "Exposer donn√©es personnelles", "Rester factuel"], "c": [0, 1, 2], "e": "Rester dans le cadre et RGPD."}, {"type": "single", "t": "MISCO : choix prioritaire ?", "o": ["Partenaire d‚Äôabord", "Solution AF imm√©diate si possible", "Train uniquement", "Attendre pax"], "c": 1, "e": "Toujours privil√©gier AF si dispo."}, {"type": "single", "t": "DBC UE : r√©f√©rence ?", "o": ["CE261/2004", "CE201/1999", "IATA 302", "PAM 7.5"], "c": 0, "e": "R√®glement CE261/2004."}, {"type": "multi", "t": "Annulation jour J : actions", "o": ["Informer (annonce/affichage)", "Proposer options", "Garder silence", "Prestations si √©ligible"], "c": [0, 1, 3], "e": "Informer + options + prestations."}, {"type": "single", "t": "MISCO avec bagage non transf√©rable :", "o": ["Ignorer", "Informer + tag RUSH + options", "Destruire tag", "Annuler voyage"], "c": 1, "e": "Informer et traiter bagage (RUSH)."}, {"type": "single", "t": "DBC : h√©bergement priorit√© ?", "o": ["Au hasard", "PMR/familles/vuln√©rables d‚Äôabord", "Derniers arriv√©s", "Clients sans bagage"], "c": 1, "e": "Prioriser vuln√©rables."}, {"type": "single", "t": "R√©acheminement sur vol complet :", "o": ["Impossible", "Voir matrice de r√©acheminement", "Toujours forcer", "Jamais contacter CCO"], "c": 1, "e": "R√©f. matrice PAM."}, {"type": "single", "t": "Vol annul√© : attestation ?", "o": ["Inutile", "Fournir attestation d‚Äôannulation", "Client imprime seul", "PNC g√®re"], "c": 1, "e": "Attestation sur demande."}, {"type": "single", "t": "Affr√®tement last minute :", "o": ["Proc√©dure standard", "Proc√©dure d√©di√©e (infos + services)", "Refus", "Libre"], "c": 1, "e": "Consignes sp√©cifiques d‚Äôinfo/traitement."}, {"type": "single", "t": "Changement de config cabine :", "o": ["Jamais", "Proc√©dure PAM (sur/d√©classement)", "Libre choix", "PNC d√©cide"], "c": 1, "e": "Suivre proc√©dures PAM."}, {"type": "single", "t": "Retour vol (RTB) :", "o": ["Toujours d√©barquer", "Actions escale + messages d√©di√©s", "Pas d‚Äôaction", "Oublier bagages"], "c": 1, "e": "Proc√©dure retour vol."}, {"type": "single", "t": "Transport terrestre (bus/train) IRG :", "o": ["Jamais", "Possible selon PAM", "Toujours taxi", "Client paie puis rembourse"], "c": 1, "e": "Selon PAM : bus/train/taxi encadr√©s."}, {"type": "multi", "t": "R√©acheminement : priorit√©s", "o": ["S√©curit√© d‚Äôabord", "AF si dispo imm√©diate", "Info claire client", "Ignorer correspondances"], "c": [0, 1, 2], "e": "S√©curit√©, AF prioritaire, info claire."}, {"type": "single", "t": "Power bank en soute ?", "o": ["Autoris√© si √©teint", "Strictement interdit", "Autoris√© <100 Wh", "Autoris√© si double emballage"], "c": 1, "e": "Batteries de rechange lithium interdites en soute."}, {"type": "single", "t": "Power bank en cabine :", "o": ["Sur soi, bornes prot√©g√©es", "Dans coffre cabine", "Dans poche si√®ge", "Dans galley"], "c": 0, "e": "Sur soi, bornes prot√©g√©es."}, {"type": "single", "t": "E‚Äëcigarette :", "o": ["Usage autoris√©", "Recharge autoris√©e", "Transport cabine uniquement, usage interdit", "Soute uniquement"], "c": 2, "e": "Transport cabine, usage/charge interdits."}, {"type": "single", "t": "Briquet standard :", "o": ["1 sur soi", "Libre en soute", "2 en poche", "Interdit totalement"], "c": 0, "e": "Un briquet/allumettes de s√ªret√© sur soi."}, {"type": "single", "t": "Briquet torche :", "o": ["Autoris√©", "Interdit", "Soute OK", "Cabine OK"], "c": 1, "e": "G√©n√©ralement interdit."}, {"type": "single", "t": "Allumettes ‚Äòstrike anywhere‚Äô :", "o": ["Tol√©r√©es", "Interdites", "Soute uniquement", "Cabine illimit√©"], "c": 1, "e": "Interdites."}, {"type": "multi", "t": "Batteries de rechange (lithium) :", "o": ["Cabine uniquement", "Bornes prot√©g√©es", "Soute si <100 Wh", "Jamais bornes expos√©es"], "c": [0, 1, 3], "e": "Cabine, bornes prot√©g√©es."}, {"type": "single", "t": "Batteries >160 Wh :", "o": ["Admis cabine", "Admis soute", "Interdit au transport pax", "Libre si d√©charg√©es"], "c": 2, "e": "Interdits pour pax."}, {"type": "single", "t": "Glace carbonique (denr√©es) :", "o": ["Toujours interdite", "Autoris√©e avec limite + ventilation", "Soute sans limite", "Cabine sans limite"], "c": 1, "e": "Limite (p.ex. 2,5 kg) + ventilation."}, {"type": "single", "t": "Cartouches gaz camping :", "o": ["Libre", "Interdit passager", "Soute OK", "Cabine OK"], "c": 1, "e": "Interdit passagers."}, {"type": "single", "t": "A√©rosol de toilette 250 ml :", "o": ["Autoris√© avec conditions", "Toujours interdit", "Uniquement soute", "Uniquement cabine"], "c": 0, "e": "Tol√©rance sous conditions."}, {"type": "single", "t": "Thermom√®tre mercure perso :", "o": ["Libre", "Restreint/√† √©viter", "Toujours soute", "Toujours cabine"], "c": 1, "e": "Risque mercure."}, {"type": "single", "t": "Smart luggage (batt. amovible) :", "o": ["Soute OK si batterie retir√©e", "Toujours interdit", "Cabine OK sans retrait", "Soute avec batterie"], "c": 0, "e": "Retirer la batterie si en soute."}, {"type": "single", "t": "Batterie endommag√©e :", "o": ["Transport possible", "Refus de transport", "Soute uniquement", "Informer PNC et charger"], "c": 1, "e": "Refus."}, {"type": "single", "t": "E‚Äëscooter/e‚Äëbike :", "o": ["Admis d√©charg√©", "G√©n√©ralement interdit pax", "Soute autoris√©e", "Cabine autoris√©e"], "c": 1, "e": "G√©n√©ralement interdit."}, {"type": "multi", "t": "Liquides cabine :", "o": ["R√©cipients ‚â§100 ml", "Dans sac 1L", "Sans limite qty", "Exceptions duty free/med"], "c": [0, 1, 3], "e": "R√®gle 100 ml + sac 1L + exceptions."}, {"type": "single", "t": "Sprays auto‚Äëd√©fense :", "o": ["Admis soute", "Interdits passagers", "Cabine OK", "Libre"], "c": 1, "e": "Interdits passagers."}, {"type": "single", "t": "Allumettes de s√ªret√© :", "o": ["Sur soi (1)", "Soute", "Cabine (x3)", "Interdit"], "c": 0, "e": "Sur soi uniquement."}, {"type": "single", "t": "Bouteilles d‚Äôoxyg√®ne perso :", "o": ["Libre", "R√©glement√©/accord requis", "Soute uniquement", "Jamais"], "c": 1, "e": "Accord + restrictions."}, {"type": "single", "t": "POC (concentrateur) :", "o": ["Libre sans doc", "Sous conditions (mod√®le approuv√©, autonomie)", "Soute", "Interdit"], "c": 1, "e": "Conditions sp√©cifiques."}, {"type": "single", "t": "Batterie lithium appareil install√© :", "o": ["Cabine seulement", "Soute seulement", "Cabine/soute selon appareil", "Toujours interdit"], "c": 2, "e": "Selon appareil/puissance."}, {"type": "single", "t": "Chargeur batterie en vol :", "o": ["Autoris√© tout le temps", "D√©conseill√©/peut √™tre interdit", "Obligatoire", "PNC charge"], "c": 1, "e": "Peut √™tre interdit."}, {"type": "single", "t": "Retrait articles interdits cabine :", "o": ["Jamais", "Proc√©dure d√©di√©e", "√Ä la discr√©tion pax", "Ignorer"], "c": 1, "e": "Proc√©dure retrait/consignation."}, {"type": "single", "t": "Ballons h√©lium :", "o": ["Libre", "R√©glement√©/selon a√©roport", "Toujours interdit", "Soute obligatoire"], "c": 1, "e": "Selon r√®gles locales/a√©roport."}, {"type": "single", "t": "Denr√©es p√©rissables :", "o": ["Jamais admises", "Admissibles sous conditions", "Toujours cabine", "Toujours soute"], "c": 1, "e": "Sous conditions d‚Äôemballage/quantit√©."}, {"type": "single", "t": "WCBD :", "o": ["Fauteuil manuel", "Fauteuil batt. s√®che", "Fauteuil batt. lithium", "Civi√®re"], "c": 1, "e": "Wheelchair Battery Dry."}, {"type": "single", "t": "WCLB :", "o": ["Fauteuil manuel", "Fauteuil batt. lithium", "Fauteuil batt. humide", "B√©quilles"], "c": 1, "e": "Wheelchair Lithium Battery."}, {"type": "single", "t": "WCMP :", "o": ["Fauteuil manuel propuls√©", "Batt. humide", "Batt. s√®che", "Assistance PMR"], "c": 0, "e": "Wheelchair Manual Propelled."}, {"type": "single", "t": "WCLB ‚Äì pr√©caution cl√© :", "o": ["Batterie fix√©e/isol√©e, bornes prot√©g√©es", "Aucune", "Soute libre", "Cabine obligatoire"], "c": 0, "e": "R√®gles lithium."}, {"type": "single", "t": "Acheminement WCBD/WCLB :", "o": ["Toujours cabine", "Proc√©dures PMR + DG", "Libre", "Refus"], "c": 1, "e": "Proc√©dures PMR+DG."}, {"type": "single", "t": "WCHC assistance :", "o": ["Pas prioritaire", "Prioritaire et coordonn√©e", "Jamais bus", "PNC seul"], "c": 1, "e": "Priorit√© + coordination assistance."}, {"type": "single", "t": "STCR (civi√®re) :", "o": ["Refus√©e", "Accept√©e sous conditions", "Libre", "Uniquement USA"], "c": 1, "e": "Proc√©dure d√©di√©e."}, {"type": "single", "t": "Jambe en extension :", "o": ["R√®gles d‚Äôacceptation sp√©cifiques", "Libre", "Toujours exit", "Soute"], "c": 0, "e": "Positions sp√©cifiques."}, {"type": "single", "t": "DPNA :", "o": ["Aucune particularit√©", "Assistance/briefing adapt√©s", "Refus", "Toujours avec escorte"], "c": 1, "e": "Accompagnement adapt√©."}, {"type": "single", "t": "Oxyg√®ne fourni Cie :", "o": ["Toujours dispo", "Sur routes sp√©cifiques et r√©servation", "Jamais", "Uniquement LC"], "c": 1, "e": "Voir politique/route."}, {"type": "single", "t": "POC ‚Äì batteries :", "o": ["Autonomie suffisante requise", "Sans importance", "Soute", "Pr√™t par Cie"], "c": 0, "e": "Autonomie exig√©e."}, {"type": "single", "t": "Poussette enregistr√©e :", "o": ["Toujours passerelle", "Selon circuit (tapis/comptoir sp√©ciaux)", "Toujours √† CDG2E", "Jamais cabine"], "c": 1, "e": "Selon acheminement/gabarit."}, {"type": "single", "t": "Etiquette PWD bagage :", "o": ["Aucun marquage", "√âtiquette d√©di√©e PMR", "√âtiquette UM", "√âtiquette P"], "c": 1, "e": "√âtiquette PWD d√©di√©e."}, {"type": "single", "t": "Quota PMR/SSR en cabine :", "o": ["Sans limite", "Sous quotas/config avion", "Toujours refus√©", "Libre"], "c": 1, "e": "Selon config et s√©curit√©."}, {"type": "multi", "t": "Aide mobilit√© personnelle :", "o": ["Identification", "Protections bornes", "Info transporteur", "Embarquement sans contr√¥le"], "c": [0, 1, 2], "e": "Identification + protections + info."}, {"type": "single", "t": "Contr√¥le documentaire :", "o": ["Inutile si e-ticket", "Obligatoire √† l‚Äôenregistrement", "PNC uniquement", "Client s‚Äôauto-contr√¥le"], "c": 1, "e": "V√©rif. visas/dur√©e/documents."}, {"type": "single", "t": "API USA/UK/CA :", "o": ["Optionnel", "Obligatoire selon pays", "Toujours inutile", "PAM ne traite pas"], "c": 1, "e": "Formalit√©s √©lectroniques par pays."}, {"type": "single", "t": "HLE :", "o": ["Heure limite d‚Äôenregistrement", "Heure libre d‚Äôembarquement", "Heure limite embarquement", "Heure l√©gale Europe"], "c": 0, "e": "Heure Limite d‚ÄôEnregistrement."}, {"type": "single", "t": "Enregistrement de bout en bout (EBB) :", "o": ["Sans conditions", "Conditions + restrictions", "Toujours refus√©", "PNC g√®re"], "c": 1, "e": "EBB soumis √† conditions."}, {"type": "single", "t": "Affichage zone enregistrement :", "o": ["Aucun obligatoire", "Infos r√©glementaires + commerciales", "Pub uniquement", "Prix billets"], "c": 1, "e": "Infos obligatoires + commerciales."}, {"type": "single", "t": "Files d‚Äôattente :", "o": ["Aucune gestion", "Gestion d√©di√©e + SkyPriority", "Libre service uniquement", "VIP uniquement"], "c": 1, "e": "Gestion files + SkyPriority."}, {"type": "single", "t": "Kiosks ‚Äì impression BP :", "o": ["Jamais", "Possible", "Interdit USA", "PNC imprime"], "c": 1, "e": "Possible selon syst√®me."}, {"type": "single", "t": "Cl√¥ture enregistrement :", "o": ["Accepter liste attente apr√®s", "Traiter refus√©s + standby", "Libre", "Toujours prolonger"], "c": 1, "e": "Proc√©dures d√©di√©es."}, {"type": "single", "t": "Messages fin de vol :", "o": ["Inutiles", "Automatiques + manuels", "PNC uniquement", "Jamais envoy√©s"], "c": 1, "e": "Automatiques/manuels."}, {"type": "single", "t": "Panne Alt√©a DC :", "o": ["Stop op√©ration", "Proc√©dure DC Backup ou manuelle", "Annuler vols", "Attendre"], "c": 1, "e": "Proc√©dures de secours."}, {"type": "single", "t": "Zone boarding :", "o": ["Al√©atoire", "Par zones + priorit√©s", "VIP seulement", "PMR √† la fin"], "c": 1, "e": "Zones + priorit√©s (PMR/SkyPriority)."}, {"type": "single", "t": "Pr√©-embarquement :", "o": ["Jamais", "PMR/UM/ familles selon PAM", "Toujours business", "Aucun"], "c": 1, "e": "Pr√©-embarquement d√©di√©."}, {"type": "single", "t": "Client manquant √† la porte :", "o": ["Fermer directement", "Proc√©dure client manquant + annonces", "Ignorer", "PNC d√©cide"], "c": 1, "e": "Proc√©dure d√©di√©e."}, {"type": "single", "t": "OK fermeture porte :", "o": ["Annonce interne + retrait passerelle", "Fermer sans annonce", "PNC choisit", "Toujours 15 min avant STD"], "c": 0, "e": "Proc√©dure OK porte."}, {"type": "single", "t": "Modifications last minute :", "o": ["Jamais", "Processus d√©di√© (PAM)", "Libre", "PNC d√©cide"], "c": 1, "e": "Proc√©dures PAM."}, {"type": "single", "t": "Contact √©quipage :", "o": ["Inutile", "PIL/PIM/coordination", "Client informe", "Jamais"], "c": 1, "e": "PIL/PIM + coordination √©quipage."}, {"type": "single", "t": "Conditions m√©t√©o d√©favorables :", "o": ["Aucune adaptation", "Proc√©dures sp√©cifiques", "PNC d√©cide", "Toujours bus"], "c": 1, "e": "Proc√©dures PAM."}, {"type": "single", "t": "D√©barquement rapide global :", "o": ["Inexistant", "Proc√©dure d√©di√©e", "Toujours", "PNC seul"], "c": 1, "e": "Proc√©dure PAM."}, {"type": "single", "t": "Bagages cabine non garantis :", "o": ["Toujours garantis", "Peuvent √™tre repris en porte", "Jamais repris", "Toujours payants"], "c": 1, "e": "Peuvent √™tre repris (porte)."}, {"type": "single", "t": "CBBG (bagage sur si√®ge) :", "o": ["Interdit", "Possible selon conditions", "Toujours gratuit", "Soute obligatoire"], "c": 1, "e": "Conditions CBBG."}, {"type": "single", "t": "√âtiquette HEAVY :", "o": [">23 kg typiquement", ">32 kg", "Toujours", "Jamais"], "c": 0, "e": "Marquage poids √©lev√© (selon politique)."}, {"type": "single", "t": "√âtiquette PRIORITY :", "o": ["Jamais", "Pour statuts/produits √©ligibles", "Uniquement UM", "Toujours"], "c": 1, "e": "√âligibilit√© SP/Statut."}, {"type": "single", "t": "√âtiquette UM :", "o": ["Sur bagage UM", "Interdite", "Sur tous bagages enfants", "Sur poussettes"], "c": 0, "e": "√âtiquette d√©di√©e UM."}, {"type": "single", "t": "Bagage ‚Äòpooling‚Äô :", "o": ["Valable partout", "P√©rim√®tre limit√©", "Inexistant", "Toujours refus√©"], "c": 1, "e": "P√©rim√®tre limit√© (ex. zones sp√©cifiques)."}, {"type": "single", "t": "Franchise soute :", "o": ["Toujours 1PC", "Selon billet/statut/route", "Toujours 2PC", "Jamais"], "c": 1, "e": "Franchise varie."}, {"type": "single", "t": "ABA (bagage supp. anticip√©) :", "o": ["Inexistant", "Possible (achat √† l‚Äôavance)", "Toujours gratuit", "Uniquement √† l‚Äôa√©roport"], "c": 1, "e": "ABA possible en amont."}, {"type": "single", "t": "DSI (d√©claration valeur) :", "o": ["Inutile", "Possible avec calcul montant", "Toujours obligatoire", "PNC g√®re"], "c": 1, "e": "DSI selon valeur."}, {"type": "single", "t": "WorldTracer :", "o": ["Jamais", "Outil suivi bagages (perte/dommage)", "PNC", "Client seul"], "c": 1, "e": "Outil suivi bagages."}, {"type": "single", "t": "Conciergeries admises zone enregistrement :", "o": ["Toutes", "AF BeMyGuest & ADP Extime", "Aucune", "Selon badge pax"], "c": 1, "e": "Services autoris√©s uniquement."}, {"type": "single", "t": "Conciergerie sans badge :", "o": ["Laisser passer", "Challenger badge TCA ; alerter si besoin", "Toujours refuser", "Ignorer"], "c": 1, "e": "Challenging + alerte."}, {"type": "single", "t": "Accompagnement zone enregistrement :", "o": ["Toute conciergerie r√©serv√©e", "Uniquement AF BeMyGuest/ADP Extime", "Toujours famille", "PNC"], "c": 1, "e": "Restriction stricte."}, {"type": "single", "t": "ICP ‚Äì insultes/intimidation :", "o": ["ICP1", "ICP2", "ICP3", "Pas ICP"], "c": 1, "e": "ICP2 : agressif verbal/physique l√©ger."}, {"type": "single", "t": "Bristol d‚Äôavertissement :", "o": ["Tout agent", "Manager de proximit√©", "PNC", "Client"], "c": 1, "e": "Remis par manager."}, {"type": "single", "t": "Filmer un agent :", "o": ["Autoris√©", "Refuser, consigner, alerter canal d√©di√©", "Ignorer", "PNC r√©pond"], "c": 1, "e": "Refuser/consigner/alerter."}];

    function shuffle(arr){
      for (let i = arr.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1)); [arr[i], arr[j]] = [arr[j], arr[i]]; }
      return arr;
    }

    function shuffleOptions(q){
      const pairs = q.o.map((text, idx)=>({text, idx}));
      shuffle(pairs);
      q.o = pairs.map(p=>p.text);
      if (q.type === 'single') { q.c = pairs.findIndex(p=>p.idx === q.c); }
      else if (q.type === 'multi') { q.c = q.c.map(idx => pairs.findIndex(p=>p.idx === idx)).sort((a,b)=>a-b); }
      return q;
    }

    let Q = [];
    let i = 0;
    let answered = false;
    let score = 0;
    let remaining = 30;
    let ticker = null;

    function initQuiz(){
      Q = POOL.map(q => ({type:q.type||'single', t:q.t, o:[...q.o], c: Array.isArray(q.c)?[...q.c]:q.c, e:q.e})).map(shuffleOptions);
      shuffle(Q);
      i = 0; score = 0; answered = false;
      document.getElementById('next').disabled = true;
      render();
      startPerQuestionTimer();
    }

    function render(){
      const bar = document.getElementById('bar');
      const meta = document.getElementById('meta');
      const sc  = document.getElementById('liveScore');
      const qn  = Q[i];
      const total = Q.length;

      meta.textContent = `Question ${i+1} / ${total}${qn.type==='multi'?' ‚Ä¢ (plusieurs r√©ponses)':''}`;
      bar.style.width = `${Math.round(((i)/total)*100)}%`;
      sc.textContent = `Score : ${score} / ${total}`;

      const wrap = [];
      wrap.push(`<div class="q">${qn.t}</div><ul>`);
      if (qn.type === 'multi') { qn.o.forEach((opt,idx)=>{ wrap.push(`<li><label><input type="checkbox" name="opt" value="${idx}" onclick="onSelect()"> ${opt}</label></li>`); }); }
      else { qn.o.forEach((opt,idx)=>{ wrap.push(`<li><label><input type="radio" name="opt" value="${idx}" onclick="onSelect()"> ${opt}</label></li>`); }); }
      wrap.push(`</ul><div id="feed" class="feed"></div>`);
      document.getElementById('quiz').innerHTML = wrap.join('');

      answered = false;
      document.getElementById('next').disabled = true;
      remaining = 30;
      document.getElementById('timer').classList.remove('time-low');
      updateTimerUI();
      document.getElementById('next').textContent = 'Valider';
    }

    function onSelect(){
      if (!answered) document.getElementById('next').disabled = false;
    }

    function evaluate(){
      const qn = Q[i];
      let correct = false;
      if (qn.type === 'single') {
        const sel = document.querySelector('input[name="opt"]:checked');
        if (!sel) return null;
        correct = (parseInt(sel.value,10) === qn.c);
      } else {
        const sels = Array.from(document.querySelectorAll('input[name="opt"]:checked')).map(x=>parseInt(x.value,10)).sort((a,b)=>a-b);
        if (sels.length === 0) return null;
        correct = (JSON.stringify(sels) === JSON.stringify(qn.c));
      }
      return correct;
    }

    function showFeedback(correct){
      const qn = Q[i];
      const feed = document.getElementById('feed');
      if (correct) { feed.className = 'feed ok'; feed.textContent = `Bonne r√©ponse. ${qn.e}`; }
      else {
        feed.className = 'feed bad';
        let sol = (qn.type==='single') ? qn.o[qn.c] : qn.c.map(idx=>qn.o[idx]).join(' + ');
        feed.textContent = `Mauvaise r√©ponse. Solution : ${sol}. ${qn.e}`;
      }
    }

    function nextQ(){
      if (answered) {
        i++;
        if (i < Q.length) render(); else finish();
        startPerQuestionTimer();
        return;
      }
      const res = evaluate();
      if (res === null) { alert("Choisis au moins une r√©ponse."); return; }
      if (res) score++;
      showFeedback(res);
      document.getElementById('liveScore').textContent = `Score : ${score} / ${Q.length}`;
      answered = true;
      stopPerQuestionTimer();
      document.getElementById('next').textContent = 'Question suivante';
      // Auto-advance after short delay to read feedback
      setTimeout(()=>{ i++; if (i < Q.length) { render(); startPerQuestionTimer(); } else { finish(); } }, 1100);
    }

    function autoTimeUp(){
      if (answered) return;
      showFeedback(false);
      answered = true;
      document.getElementById('next').disabled = false;
      document.getElementById('next').textContent = 'Question suivante';
      setTimeout(()=>{ i++; if (i < Q.length) { render(); startPerQuestionTimer(); } else { finish(); } }, 800);
    }

    function resetQuiz(){
      stopPerQuestionTimer();
      initQuiz();
    }

    function finish(){
      stopPerQuestionTimer();
      const total = Q.length;
      const pct = Math.round(100 * score / total);
      const appr = (pct>=90) ? "Excellent (ma√Ætrise)"
                  : (pct>=80) ? "Tr√®s bien (solide)"
                  : (pct>=70) ? "Bien (√† consolider)"
                  : (pct>=60) ? "Passable (renforcer les bases)"
                  : "Insuffisant (r√©viser PAM/IRG/DG)";
      document.getElementById('bar').style.width = '100%';
      document.getElementById('meta').textContent = 'Termin√© ‚úÖ';
      document.getElementById('quiz').innerHTML =
        `<div class="q">Bravo ! Tu as termin√© le quiz.</div>
         <p class="score">Score final : <strong>${score}/${total}</strong> (${pct}%) ‚Äî ${appr}</p>
         <p>Tu peux cliquer sur ‚ÄúRecommencer (nouvel ordre)‚Äù pour rejouer.</p>`;
      document.getElementById('next').disabled = true;
      document.getElementById('liveScore').textContent = `Score final : ${score} / ${total} (${pct}%) ‚Äî ${appr}`;
      document.getElementById('ttext').textContent = '--:--';
      document.getElementById('timebarfill').style.width = '0%';
    }

    // Timer 30s/question with visual bar
    function startPerQuestionTimer(){
      stopPerQuestionTimer();
      remaining = 30;
      document.getElementById('timebarfill').style.width = '100%';
      updateTimerUI();
      ticker = setInterval(()=>{
        remaining--;
        const pct = Math.max(0, remaining/30)*100;
        document.getElementById('timebarfill').style.width = pct + '%';
        if (remaining === 5) {
          const beep = document.getElementById('beep'); if (beep) beep.play().catch(()=>{});
          document.getElementById('timer').classList.add('time-low');
        }
        if (remaining <= 0) { stopPerQuestionTimer(); autoTimeUp(); }
        else { updateTimerUI(); }
      }, 1000);
    }
    function stopPerQuestionTimer(){ if (ticker) { clearInterval(ticker); ticker=null; } }
    function updateTimerUI(){
      const m = Math.floor(remaining/60); const s = remaining % 60;
      document.getElementById('ttext').textContent = `${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
    }

    // Start
    initQuiz();
  </script>
</body>
</html>
