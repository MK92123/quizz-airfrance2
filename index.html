
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Quiz Air France ‚Äî Acc√®s prot√©g√©</title>
  <style>
    :root{--bg:#f6f7fb;--card:#ffffff;--txt:#111827;--muted:#6b7280;--ok:#0f766e;--bad:#b91c1c;--pri:#0a66ff;--warn:#b45309;--warnbg:#fff7ed}
    body{margin:0;padding:0;background:var(--bg);color:var(--txt);font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Arial}
    .wrap{max-width:980px;margin:0 auto;background:var(--card);border-radius:16px;box-shadow:0 8px 24px rgba(0,0,0,.06);padding:24px;margin-top:24px;margin-bottom:24px}
    header{display:flex;flex-direction:column;align-items:center;gap:.35rem;margin-bottom:8px}
    header img{max-width:220px;height:auto;display:block}
    h1{margin:4px 0 0;text-align:center}
    .sub{color:var(--muted);text-align:center;margin:6px 0 12px;display:flex;gap:12px;justify-content:center;flex-wrap:wrap}
    .pill{background:#eef2ff;color:#1e3a8a;border-radius:999px;padding:4px 10px;font-size:.9rem}
    .progress{height:10px;background:#e5e7eb;border-radius:99px;overflow:hidden;margin:8px 0 18px}
    .bar{height:100%;width:0;background:var(--pri);transition:width .25s}
    .q{font-weight:700;margin:10px 0 12px}
    ul{list-style:none;padding:0;margin:0}
    li{margin:.5rem 0}
    label{display:flex;gap:.6rem;align-items:flex-start;cursor:pointer}
    input[type=radio], input[type=checkbox]{margin-top:.25rem}
    .feed{display:none;margin-top:12px;border-radius:10px;padding:10px}
    .ok{display:block;background:#e7f7f3;color:#065f46}
    .bad{display:block;background:#fdeaea;color:#7f1d1d}
    .row{display:flex;gap:10px;justify-content:space-between;margin-top:16px;flex-wrap:wrap}
    button{border:0;border-radius:10px;padding:10px 14px;cursor:pointer;font-weight:600}
    #next{background:var(--pri);color:#fff} #next:disabled{opacity:.5;cursor:not-allowed}
    #reset{background:#6b7280;color:#fff}
    .score{margin-top:8px;text-align:center;color:var(--muted)}
    footer{margin-top:18px;text-align:center;color:var(--muted);font-size:.9rem}
    .timer{background:#fee2e2;color:#991b1b;border-radius:999px;padding:4px 10px;font-weight:700}
    .time-low{background:#fecaca;color:#7f1d1d}
    .pill-ghost{background:#f3f4f6;color:#374151}
    .disclaimer{background:var(--warnbg);border:1px solid #fed7aa;color:var(--warn);padding:10px 12px;border-radius:10px;margin:8px 0 12px;font-size:.95rem}
    /* Gate */
    #gate{display:flex;min-height:100vh;align-items:center;justify-content:center;background:#0f172a;padding:16px}
    .card{background:#fff;padding:24px;border-radius:14px;box-shadow:0 10px 30px rgba(0,0,0,.25);max-width:380px;width:100%}
    .card h2{margin:0 0 8px}
    .card p{margin:0 0 10px;color:#6b7280}
    .card input{width:100%;padding:10px;border:1px solid #e5e7eb;border-radius:10px;margin-bottom:10px}
    .card button{width:100%;padding:10px 14px;border:0;border-radius:10px;background:#0a66ff;color:#fff;font-weight:600;cursor:pointer}
    .error{color:#b91c1c;margin-top:8px;display:none}
  </style>
</head>
<body>

  <!-- üîê PASSWORD GATE -->
  <div id="gate">
    <div class="card">
      <h2>Acc√®s quiz</h2>
      <p>Entrez le mot de passe pour continuer.</p>
      <input id="pw" type="password" placeholder="Mot de passe">
      <button onclick="unlock()">Entrer</button>
      <div id="pwmsg" class="error">Mot de passe incorrect</div>
      <div style="margin-top:12px;font-size:.85rem;color:#94a3b8">Astuce : le mot de passe est sensible √† la casse.</div>
    </div>
  </div>

  <!-- APP -->
  <div id="app" style="display:none">
    <div class="wrap">
      <header>
        <img src="https://th.bing.com/th/id/R.e981a076438938f94b4bdef2cc28ed8c?rik=Tl8jWSDOnbPScw&riu=http%3a%2f%2fpluspng.com%2fimg-png%2fair-france-logo-png-air-france-logo-airfrance-skyteam-symbol-5650.png&ehk=%2bzIUC9nKAkbnVe1Gq4lsFCWxLCR3mhuQeeenhYbyNyQ%3d&risl=&pid=ImgRaw&r=0" alt="Air France Logo" onerror="this.style.display='none'">
        <h1>Quiz Air France</h1>
      </header>

      <div class="disclaimer">
        Ceci est <strong>confidentiel</strong> et ne doit pas √™tre partag√©. En cas de partage, contactez : <strong>kneycie@gmail.com</strong>. Propri√©t√© intellectuelle d‚Äôun agent AF.
      </div>

      <div class="sub">
        <span id="meta" class="pill"></span>
        <span id="timer" class="timer">00:30</span>
        <span id="liveScore" class="pill-ghost"></span>
      </div>
      <div class="progress"><div id="bar" class="bar"></div></div>
      <div id="quiz"></div>
      <div class="row">
        <button id="reset" onclick="resetQuiz()">Recommencer (nouvel ordre)</button>
        <button id="next" onclick="nextQ()" disabled>Suivant</button>
      </div>
      <div id="score" class="score"></div>
      <footer>Mode examen ‚Äî 30s / question ‚Äî ordre al√©atoire ‚Äî feedback instantan√© ‚Äî g√©n√©r√© le 2025-08-11 02:22.</footer>
    </div>
  </div>

  <audio id="beep">
    <source src="data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEAESsAACJWAAACABYAAABWAAACAAA=" type="audio/wav">
  </audio>

  <script>
    // üîê Password (change-le ici)
    const PASSWORD = "AF2025!";
    if (sessionStorage.getItem("quiz_unlocked") === "1") { document.getElementById("gate").style.display="none"; document.getElementById("app").style.display="block"; }

    function unlock(){
      const v = (document.getElementById("pw").value||"").trim();
      if (v === PASSWORD) {
        sessionStorage.setItem("quiz_unlocked","1");
        document.getElementById("gate").style.display="none";
        document.getElementById("app").style.display="block";
        setTimeout(()=>{
          const first = document.querySelector('#app input[type="radio"], #app input[type="checkbox"]');
          if (first) first.focus();
        }, 50);
      } else {
        const msg = document.getElementById("pwmsg"); msg.style.display="block"; setTimeout(()=>msg.style.display="none", 2000);
      }
    }
    document.addEventListener("keydown", (e)=>{ if (document.getElementById("gate").style.display!=="none" && e.key==="Enter") unlock(); });

    // === Quiz ===

    // Question schema:
    // type: 'single' or 'multi'
    // t: text, o: options[], c: correct index (single) or array of index (multi), e: explanation
    const BASE = [
      {type:'single', t:"Un pax √† destination de Tel-Aviv peut-il obtenir sa carte d‚Äôembarquement sans contr√¥le Securitas ?", o:["Oui","Non"], c:1, e:"Contr√¥le Securitas obligatoire avant √©mission de la BP pour TLV."},
      {type:'single', t:"Les batteries externes (power banks) sont-elles autoris√©es dans les coffres cabines ?", o:["Non","Oui"], c:0, e:"Admis en cabine mais sur soi. Strictement interdites en soute."},
      {type:'single', t:"La recharge d‚Äôune e-cigarette est-elle autoris√©e √† bord ?", o:["Oui","Non"], c:1, e:"Recharge et vapotage interdits √† bord."},
      {type:'single', t:"Bagage abandonn√© en salle d‚Äôembarquement : premi√®re action ?", o:["Alerter s√ªret√© et s√©curiser le p√©rim√®tre","Essayer d‚Äôouvrir pour identifier"], c:0, e:"Ne jamais manipuler un bagage suspect."},
      {type:'single', t:"PAM ‚Äì chapitre pour passagers indisciplin√©s ?", o:["6.5","6.9","6.12"], c:0, e:"R√©f. PAM 6.5."},
      {type:'single', t:"O√π se trouve la Matrice de r√©acheminement PAM ?", o:["4.1.6.3","4.1.6.4","4.1.6.5"], c:1, e:"R√©f. PAM 4.1.6.4."},
      {type:'single', t:"PAM ‚Äì qui peut autoriser un ‚Äòprocess override‚Äô en escale ?", o:["Tout agent","Manager op√©rationnel selon proc√©dure"], c:1, e:"Cha√Æne d‚Äôautorit√© d√©finie."},

      {type:'single', t:"Tol√©rance ‚Äòbag pool‚Äô s‚Äôapplique-t-elle √† tout le r√©seau AF ?", o:["Oui","Non, p√©rim√®tre limit√© (ex. Afrique 12‚Äì13)"], c:1, e:"Limit√©e √† un p√©rim√®tre d√©fini."},
      {type:'single', t:"√Ä l‚Äôarriv√©e, poussette enregistr√©e en soute :", o:["Toujours remise passerelle","Tapis bagages ou comptoir bagages sp√©ciaux selon acheminement","Toujours √† l‚Äôescale de correspondance"], c:1, e:"Selon circuit/gabarit ; parfois passerelle si soute accessible."},
      {type:'single', t:"Liquides en cabine :", o:["100 ml max chacun, sac 1L","Aucune limite"], c:0, e:"R√®gle 100 ml + sac 1L (exceptions duty free/m√©dicaux)."},
      {type:'single', t:"A√©rosols de toilette (250 ml) :", o:["Admis avec restrictions","Jamais admis"], c:0, e:"Quantit√©s et protections de valve requises."},
      {type:'single', t:"Allumettes de s√ªret√©/petit briquet :", o:["Sur soi uniquement (1), pas en soute","Libre en soute"], c:0, e:"Tol√©rance limit√©e ; soute interdite."},

      {type:'single', t:"Ozion PMR Manager ‚Äì o√π placer ‚ÄúBIS‚Äù d‚Äôune commande dans le cas ou il s'agit d'une deuxi√®me commande PHMR ?", o:["Avant NOM","Avant PR√âNOM (commande d‚Äôorigine)","En commentaire"], c:1, e:"‚ÄòBIS‚Äô avant le pr√©nom sur la commande d‚Äôorigine."},
      {type:'single', t:"PMR ‚Äì priorit√© d‚Äôembarquement :", o:["Oui (proc√©dure d√©di√©e)","Non"], c:0, e:"Embarquement prioritaire + coordination assistance."},
      {type:'single', t:"PMR ‚Äì impr√©vu de prise en charge, qui alerter ?", o:["CLD/manager op√©rationnel","PNC uniquement"], c:0, e:"Coordination c√¥t√© sol."},

      {type:'single', t:"Poids > 8 kg (caisse incluse) pour animal :", o:["Cabine","Soute AVIH"], c:1, e:">8 kg ‚Üí AVIH (jusqu‚Äô√† 75 kg)."},
      {type:'single', t:"Poids maximal AVIH (animal + caisse) :", o:["50 kg","75 kg","100 kg"], c:1, e:"Limite AVIH √† 75 kg."},
      {type:'single', t:"√Çge minimum AVIH :", o:["8 semaines","10 semaines","15 semaines"], c:2, e:"‚â• 15 semaines + vaccins."},
      {type:'single', t:"Caisse AVIH conforme :", o:["Bois","Fibre/plastique rigide + porte boulonn√©e","Tissu"], c:1, e:"Rigide + boulons, ventilation, verrou."},
      {type:'single', t:"Races brachyc√©phales accept√©es en soute ?", o:["Oui","Non"], c:1, e:"Refus√©es en soute (risque respiratoire)."},
      {type:'single', t:"Chiens cat. 1 (pit-bull, tosa, etc.) :", o:["Accept√©s","Interdits"], c:1, e:"Interdits sur vols commerciaux AF."},
      {type:'single', t:"Staffordshire Bull Terrier LOF :", o:["Interdit","Possible en soute avec cage conforme"], c:1, e:"Staffie LOF non class√© cat.1/2."},
      {type:'single', t:"PETC (cabine) : exigence cl√©", o:["Dimensions/poids cabine, sous le si√®ge","Aucune limite si calme"], c:0, e:"Confinement sous le si√®ge."},
      {type:'single', t:"SVAN (service animal) :", o:["Toujours libre sans doc","Sous conditions et docs pays/compagnie"], c:1, e:"R√®gles pays/compagnie."},

      {type:'single', t:"E‚Äëscooters / e‚Äëbikes :", o:["Admis en cabine d√©charg√©s","G√©n√©ralement interdits passagers"], c:1, e:"Risque lithium √©lev√©."},
      {type:'single', t:"Smart luggage (batterie amovible) :", o:["Soute OK si batterie retir√©e","Toujours interdit"], c:0, e:"Retirer la batterie si en soute."},
      {type:'single', t:"Glace carbonique (denr√©es) :", o:["Toujours interdite","Autoris√©e avec limite et ventilation"], c:1, e:"Limite (ex. 2,5 kg) + ventilation/√©tiquetage."},
      {type:'single', t:"Batterie lithium endommag√©e :", o:["Transport possible si isol√©e","Transport refus√©"], c:1, e:"Refus de transport."},
      {type:'single', t:"Sprays auto‚Äëd√©fense (gaz) :", o:["Admis soute","Interdits passagers"], c:1, e:"Interdits passagers."},
      {type:'multi',  t:"S√©lectionne les √©l√©ments corrects pour batteries de rechange (lithium)", o:["Toujours en cabine","Bornes prot√©g√©es/isol√©es","OK en soute si <100 Wh","Jamais avec bornes expos√©es"], c:[0,1,3], e:"Rechanges lithium en cabine uniquement, bornes prot√©g√©es."},

      {type:'single', t:"Terminal 2E : zone d‚Äôenregistrement des UM ?", o:["Zone 12","Zone 14","Zone 8","Zone 3"], c:1, e:"UM au 2E ‚Üí Zone 14."},
      {type:'single', t:"Mineure en groupe/colonie pour l‚ÄôEspagne sans AST :", o:["Accept√©","Refus√©"], c:1, e:"AST obligatoire."},
      {type:'single', t:"Mineur pour l‚ÄôEspagne avec CNI p√©rim√©e :", o:["Possible","Impossible"], c:1, e:"Document valide requis."},

      {type:'single', t:"Client misco tunisien sans visa, vol le lendemain : que faire ?", o:["H√¥tel en ville","V√©rifier visa ; sinon solution h√¥tel √† l‚Äôa√©roport","R√©acheminer imm√©diatement","Le loger chez un coll√®gue"], c:1, e:"Sans visa, pas de sortie a√©roport."},

      {type:'single', t:"F ‚Äì Zone 1 :", o:["Toute la journ√©e","Vacances : jusqu‚Äô√† 11h et √† partir de 14h","UM uniquement","Bagages sp√©ciaux"], c:1, e:"Plages vacances indiqu√©es."},
      {type:'single', t:"F ‚Äì Zone 2 :", o:["SkyPriority","UM","Long‚Äëcourrier","Bagages volumineux"], c:0, e:"SkyPriority."},
      {type:'single', t:"F ‚Äì Zone 4 :", o:["UM/BACABA/PWD","SkyPriority","Vols Afrique","Standby"], c:0, e:"UM/BACABA/PWD."},
      {type:'single', t:"F ‚Äì Zone 7 :", o:["Standby, AVIH, PETC‚Ä¶","SkyPriority","Vols domestiques","UM"], c:0, e:"Particularit√©s."},

      {type:'single', t:"Misco de Tunis (3 bagages), il est 10h00. Quel vol ?", o:["TU725 12h30","AF1084 11h30","AF1385 15h30","Aucun"], c:2, e:"Transfert bagages ‚â• 2h30 ‚Üí AF1385 15h30."},

      {type:'single', t:"DBC vers Marrakech, droit √† :", o:["Rien","R√©acheminement + assistance + indemnisation CE261","Un bon caf√©","Seulement un changement de vol"], c:1, e:"R√®glement CE261."},

      {type:'single', t:"Client Middle East en Business au 2E : acc√®s SkyPriority ?", o:["Oui","Non"], c:0, e:"Oui, classe Business."},

      {type:'single', t:"ICP ‚Äì insultes/intimidation :", o:["ICP1","ICP2","ICP3"], c:1, e:"ICP2 = agressif verbal/physique l√©ger."},
      {type:'single', t:"ICP ‚Äì bristol d‚Äôavertissement remis par :", o:["Tout agent","Manager de proximit√©"], c:1, e:"Remis par le manager."},
      {type:'single', t:"Apr√®s ICP grave :", o:["Rien","D√©clarer via LDIF + entretien (puis suivi)"], c:1, e:"LDIF + entretiens."},
      {type:'single', t:"Client filme un agent :", o:["Ignorer","Informer du refus + consigner + alerter canal d√©di√©"], c:1, e:"Refus d‚Äô√™tre film√©; consigner; alerte."},

      {type:'single', t:"Conciergeries autoris√©es en enregistrement/embarquement :", o:["Toute conciergerie","AF BeMyGuest & ADP Extime uniquement"], c:1, e:"Acc√®s restreint."},
      {type:'single', t:"Conciergerie sans badge :", o:["Laisser passer","Demander badge TCA (challenging) ; sinon CIC/Manager"], c:1, e:"Challenging + alerte si besoin."},
      {type:'single', t:"Qui peut accompagner un client en zone d‚Äôenregistrement ?", o:["Uniquement AF BeMyGuest/ADP Extime","Toute conciergerie r√©serv√©e"], c:0, e:"Restriction stricte."},

      {type:'single', t:"WCBD signifie :", o:["Fauteuil manuel","Fauteuil batterie s√®che","Fauteuil batterie lithium"], c:1, e:"Wheelchair Battery Dry."},
      {type:'single', t:"WCLB signifie :", o:["Fauteuil manuel","Fauteuil batterie lithium","Fauteuil batterie humide"], c:1, e:"Wheelchair Lithium Battery."},
      {type:'single', t:"WCMP signifie :", o:["Fauteuil manuel propuls√©","Fauteuil batterie humide","Fauteuil batterie s√®che"], c:0, e:"Wheelchair Manual Propelled."},
      {type:'single', t:"WCLB (lithium) ‚Äì point cl√© :", o:["Batterie fix√©e/isol√©e, bornes prot√©g√©es, info au transporteur","Aucune pr√©caution"], c:0, e:"Proc√©dures lithium √† respecter."},
      {type:'single', t:"Acheminement WCBD/WCLB :", o:["Toujours en cabine","Proc√©dure PMR + r√®gles DG batteries"], c:1, e:"Proc√©dures PMR + DG."},

      {type:'single', t:"Alt√©a CM ‚Äì ajout d‚Äôun SSR AVIH :", o:["En commentaire libre","Via service code + quota v√©rifi√©"], c:1, e:"Cr√©er le service + contr√¥ler quota."},
      {type:'single', t:"R√©acheminement prioritaire :", o:["Solution partenaire d‚Äôabord","Solution AF imm√©diate si possible"], c:1, e:"Toujours privil√©gier AF si dispo imm√©diate."},
      {type:'single', t:"Revalidation de billet en r√©acheminement :", o:["Toujours inutile","N√©cessaire selon changement de routing/classe"], c:1, e:"Selon r√®gles tarifaires."},
      {type:'single', t:"Bagage non transf√©rable √† temps :", o:["Ignorer et embarquer","Informer pax + options + √©tiquettes RUSH"], c:1, e:"Information + traitement bagages (RUSH)."},

      {type:'single', t:"Allumettes ‚Äòstrike anywhere‚Äô :", o:["Tol√©r√©es","Interdites"], c:1, e:"Interdites ; seules allumettes de s√ªret√© tol√©r√©es sur soi (1)."},
      {type:'single', t:"Batteries de rechange >160 Wh :", o:["Admis en cabine","Interdit au transport pax"], c:1, e:">160 Wh interdit."},
      {type:'single', t:"Cartouches gaz camping :", o:["Libre en soute","Interdites"], c:1, e:"Interdit pax."}
    ];

    const EXTRA = [
      {type:'single', t:"AVIH : appel CLD et t√©lex obligatoires si :", o:["Toujours, m√™me si r√©serv√©","Si pas de r√©servation AVIH et ajout en derni√®re minute","Jamais"], c:1, e:"Coordination CLD + t√©lex si ajout tardif/sans r√©servation."},
      {type:'single', t:"AVIH : nombre max par passager (sous r√©serve quotas) :", o:["1","2","3","4"], c:2, e:"Jusqu‚Äô√† 3 AVIH par pax selon quotas."},
      {type:'single', t:"AVIH : race brachyc√©phale chat/chien :", o:["Accept√©e en soute","Refus√©e en soute"], c:1, e:"Risque respiratoire."},
      {type:'multi',  t:"AVIH : exigences cage conformes", o:["Rigide + ventil√©e","Porte boulonn√©e","Roulettes obligatoires","Verrouillage s√ªr"], c:[0,1,3], e:"Caisse rigide ventil√©e, porte boulonn√©e, verrou s√ªr."},
      {type:'single', t:"AVIH : √¢ge minimum pour voyager :", o:["8 sem.","10 sem.","15 sem."], c:2, e:"Au moins 15 semaines."},
      {type:'single', t:"AVIH : poids max (animal+caisse) :", o:["50 kg","75 kg","90 kg"], c:1, e:"Max 75 kg."},
      {type:'single', t:"AVIH : staffie LOF :", o:["Interdit","Accept√© avec cage conforme"], c:1, e:"LOF non class√© cat.1/2."},

      {type:'single', t:"Empowerment : tu peux accorder une prestation sans manager si :", o:["Dans le cadre d√©fini (bar√®me/limite)","√Ä ta convenance"], c:0, e:"Agir dans le cadre d‚Äôempowerment d√©fini."},
      {type:'single', t:"Wave excess : objectif :", o:["R√©duire files en √©vitant encaissement micro-exc√©dents","Augmenter la taxation √† tout prix"], c:0, e:"Fluidit√©/efficacit√© op√©rationnelle."},
      {type:'single', t:"Wave excess : niveau d‚Äôusage cible du dispositif", o:["~10% des cas pertinents","~50% des pax"], c:0, e:"Utilisation cibl√©e, pas syst√©matique."},
      {type:'multi',  t:"Empowerment : cas typiques d‚Äôusage", o:["Petit geste PAX (eau, voucher mod√©r√©)","Correction erreur AF √©vidente","Refus syst√©matique d‚Äôindemniser CE261","Ajustement file SkyPriority pour PMR"], c:[0,1,3], e:"Rester dans le p√©rim√®tre et la logique qualit√©/s√©curit√©."},
      {type:'single', t:"Wave excess : on l‚Äôapplique de pr√©f√©rence quand :", o:["Impact op√©ration faible et passager coop√©ratif","Conflit et agression"], c:0, e:"Outil de fluidification, pas pour cas sensibles."},

      {type:'single', t:"MISCO : priorit√© de r√©acheminement :", o:["Partenaire d‚Äôabord","AF imm√©diat si possible"], c:1, e:"Toujours privil√©gier solution AF."},
      {type:'single', t:"DBC : base r√©glementaire EU :", o:["CE261/2004","CE201/1999"], c:0, e:"CE261/2004."},
      {type:'multi',  t:"Annulation jour J : informer le client avec", o:["Annonce + affichage","Options de r√©acheminement","Silence pour √©viter la foule","Prestations si √©ligible"], c:[0,1,3], e:"Infos + options + prestations selon matrices."},
      {type:'single', t:"MISCO avec bagage non transf√©rable :", o:["Ignorer le bagage","Informer + options + tag RUSH"], c:1, e:"Traiter bagage et informer pax."},
      {type:'single', t:"DBC : priorit√©s d‚Äôh√©bergement", o:["Au hasard","Vuln√©rables/PMR/familles en priorit√©"], c:1, e:"Priorisation clients vuln√©rables."},
      {type:'single', t:"Annulation multiple vols : outil support au sol", o:["Matrice d‚Äôassistance/services","Aucune trame"], c:0, e:"Utiliser la matrice d‚Äôassistance."},

      {type:'single', t:"Powerbank pendant le vol :", o:["Branch√©e pour charger","√âteinte/isol√©e, bornes prot√©g√©es"], c:1, e:"Jamais branch√©e en vol."},
      {type:'single', t:"Thermom√®tre au mercure (perso) :", o:["Admis librement","Restreint/√† √©viter"], c:1, e:"Risque mercure, restrictions fortes."},
      {type:'single', t:"Briquet torche (flamme bleue) :", o:["Autoris√©","Interdit"], c:1, e:"G√©n√©ralement interdit."},

      {type:'single', t:"POC (concentrateur oxyg√®ne) :", o:["Libre sans doc","Sous conditions (mod√®le approuv√©, batterie suffisante)"], c:1, e:"POC soumis conditions et autonomie batterie."},
      {type:'single', t:"DPNA (d√©ficience mentale) :", o:["Assistance adapt√©e + briefing","Aucune particularit√©"], c:0, e:"Assistance et communication adapt√©es."},
      {type:'single', t:"STCR (civi√®re) :", o:["Toujours refus√©","Accept√© sous conditions + proc√©dure d√©di√©e"], c:1, e:"R√®gles d‚Äôacceptation sp√©cifiques."},

      {type:'single', t:"API USA/UK/CA :", o:["Saisies √©lectroniques obligatoires selon pays","Optionnel"], c:0, e:"Formalit√©s √©lectroniques sp√©cifiques par pays."},
      {type:'single', t:"Contr√¥le documentaire :", o:["√Ä faire √† l‚Äôenregistrement","Inutile si e-ticket"], c:0, e:"Contr√¥le visas/dur√©e/documents obligatoire."},

      {type:'single', t:"Zone boarding :", o:["Al√©atoire","S√©quen√ßage par zones + priorit√©s"], c:1, e:"Zones + priorit√©s (SkyPriority/PMR etc.)."},
      {type:'single', t:"Client manquant √† l‚Äôembarquement :", o:["Lancer recherche + proc√©dure manquant","Fermer la porte sans action"], c:0, e:"Proc√©dure ‚Äòclient manquant‚Äô."},

      {type:'single', t:"Acc√®s salons : d√©pend de", o:["Statut/Classe/Destination","Hasard"], c:0, e:"√âligibilit√© selon statut/produit."},
      {type:'single', t:"Flying Blue Elite Plus :", o:["√âligible SkyPriority","Non"], c:0, e:"Elite Plus = SkyPriority."},

      {type:'single', t:"Cigarette √©lectronique :", o:["Transport cabine, usage/charge interdits","Libre √† bord"], c:0, e:"Transport OK, usage non."},
      {type:'single', t:"Instrument musique fragile :", o:["Toujours soute","Possible CBBG si n√©cessaire"], c:1, e:"Si√®ge payant (CBBG) possible."}
    ];

    const POOL = BASE.concat(EXTRA);

    function shuffle(arr){
      for (let i = arr.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1)); [arr[i], arr[j]] = [arr[j], arr[i]]; }
      return arr;
    }

    function shuffleOptions(q){
      const pairs = q.o.map((text, idx)=>({text, idx}));
      shuffle(pairs);
      q.o = pairs.map(p=>p.text);
      if (q.type === 'single') { q.c = pairs.findIndex(p=>p.idx === q.c); }
      else if (q.type === 'multi') { q.c = q.c.map(idx => pairs.findIndex(p=>p.idx === idx)).sort((a,b)=>a-b); }
      return q;
    }

    let Q = [];
    let i = 0;
    let answered = false;
    let score = 0;
    let remaining = 30;
    let ticker = null;

    function initQuiz(){
      Q = POOL.map(q => ({type:q.type||'single', t:q.t, o:[...q.o], c: Array.isArray(q.c)?[...q.c]:q.c, e:q.e})).map(shuffleOptions);
      shuffle(Q);
      i = 0; score = 0; answered = false;
      document.getElementById('next').disabled = true;
      render();
      startPerQuestionTimer();
    }

    function render(){
      const bar = document.getElementById('bar');
      const meta = document.getElementById('meta');
      const sc  = document.getElementById('liveScore');
      const qn  = Q[i];
      const total = Q.length;

      meta.textContent = `Question ${i+1} / ${total}${qn.type==='multi'?' ‚Ä¢ (plusieurs r√©ponses)':''}`;
      bar.style.width = `${Math.round(((i)/total)*100)}%`;
      sc.textContent = `Score : ${score} / ${total}`;

      const wrap = [];
      wrap.push(`<div class="q">${qn.t}</div><ul>`);
      if (qn.type === 'multi') { qn.o.forEach((opt,idx)=>{ wrap.push(`<li><label><input type="checkbox" name="opt" value="${idx}" onclick="onSelect()"> ${opt}</label></li>`); }); }
      else { qn.o.forEach((opt,idx)=>{ wrap.push(`<li><label><input type="radio" name="opt" value="${idx}" onclick="onSelect()"> ${opt}</label></li>`); }); }
      wrap.push(`</ul><div id="feed" class="feed"></div>`);
      document.getElementById('quiz').innerHTML = wrap.join('');

      answered = false;
      document.getElementById('next').disabled = true;
      remaining = 30;
      document.getElementById('timer').classList.remove('time-low');
      updateTimerUI();
      document.getElementById('next').textContent = 'Suivant';
    }

    function onSelect(){
      if (!answered) document.getElementById('next').disabled = false;
    }

    function evaluate(){
      const qn = Q[i];
      let correct = false;
      if (qn.type === 'single') {
        const sel = document.querySelector('input[name="opt"]:checked');
        if (!sel) return null;
        correct = (parseInt(sel.value,10) === qn.c);
      } else {
        const sels = Array.from(document.querySelectorAll('input[name="opt"]:checked')).map(x=>parseInt(x.value,10)).sort((a,b)=>a-b);
        if (sels.length === 0) return null;
        correct = (JSON.stringify(sels) === JSON.stringify(qn.c));
      }
      return correct;
    }

    function showFeedback(correct){
      const qn = Q[i];
      const feed = document.getElementById('feed');
      if (correct) { feed.className = 'feed ok'; feed.textContent = `Bonne r√©ponse. ${qn.e}`; }
      else {
        feed.className = 'feed bad';
        let sol = (qn.type==='single') ? qn.o[qn.c] : qn.c.map(idx=>qn.o[idx]).join(' + ');
        feed.textContent = `Mauvaise r√©ponse. Solution : ${sol}. ${qn.e}`;
      }
    }

    function nextQ(){
      if (answered) {
        i++;
        if (i < Q.length) render(); else finish();
        startPerQuestionTimer();
        return;
      }
      const res = evaluate();
      if (res === null) { alert("Choisis au moins une r√©ponse."); return; }
      if (res) score++;
      showFeedback(res);
      document.getElementById('liveScore').textContent = `Score : ${score} / ${Q.length}`;
      answered = true;
      stopPerQuestionTimer();
      document.getElementById('next').textContent = 'Question suivante';
    }

    function autoTimeUp(){
      if (answered) return;
      showFeedback(false);
      answered = true;
      document.getElementById('next').disabled = false;
      document.getElementById('next').textContent = 'Question suivante';
    }

    function resetQuiz(){
      stopPerQuestionTimer();
      initQuiz();
    }

    function finish(){
      stopPerQuestionTimer();
      const total = Q.length;
      const pct = Math.round(100 * score / total);
      document.getElementById('bar').style.width = '100%';
      document.getElementById('meta').textContent = 'Termin√© ‚úÖ';
      document.getElementById('quiz').innerHTML =
        `<div class="q">Bravo ! Tu as termin√© le quiz.</div>
         <p class="score">Score final : <strong>${score}/${total}</strong> (${pct}%).</p>
         <p>Tu peux cliquer sur ‚ÄúRecommencer (nouvel ordre)‚Äù pour rejouer.</p>`;
      document.getElementById('next').disabled = true;
      document.getElementById('liveScore').textContent = `Score final : ${score} / ${total} (${pct}%)`;
      document.getElementById('timer').textContent = '--:--';
    }

    // Timer 30s/question
    function startPerQuestionTimer(){
      stopPerQuestionTimer();
      remaining = 30;
      updateTimerUI();
      ticker = setInterval(()=>{
        remaining--;
        if (remaining === 5) {
          const beep = document.getElementById('beep'); if (beep) beep.play().catch(()=>{});
          document.getElementById('timer').classList.add('time-low');
        }
        if (remaining <= 0) { stopPerQuestionTimer(); autoTimeUp(); }
        else { updateTimerUI(); }
      }, 1000);
    }
    function stopPerQuestionTimer(){ if (ticker) { clearInterval(ticker); ticker=null; } }
    function updateTimerUI(){
      const m = Math.floor(remaining/60); const s = remaining % 60;
      document.getElementById('timer').textContent = `${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
    }

    // Start
    initQuiz();
  </script>
</body>
</html>
